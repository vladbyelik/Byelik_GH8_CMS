!function(t,o){"use strict";"function"==typeof define&&define.amd?define([window.dBlazy],o):"object"==typeof exports?module.exports=o(window.dBlazy):t.Bio=o(window.dBlazy)}(this,function(t){"use strict";function o(t){var o=this,r={root:null,disconnect:!1,error:!1,success:!1,observing:!1,useAjax:!1,successClass:"b-loaded",selector:".b-lazy",errorClass:"b-error",bgClass:"b-bg",rootMargin:"0px",threshold:[0]};o.options=i.extend({},r,t||{}),o.options.selector=o.options.selector+":not(."+o.options.successClass+")",o.elms=(o.options.root||s).querySelectorAll(o.options.selector),o.count=o.elms.length,o.counted=0,o._er=-1,o._ok=1,o.windowWidth=n.innerWidth||s.documentElement.clientWidth||s.body.clientWidth||n.screen.width,o.prepare(),e(o)}function e(t){var o={rootMargin:t.options.rootMargin,threshold:t.options.threshold};t.observer=new IntersectionObserver(t.observing.bind(t),o),u||(t.observe(),u=!0)}var n=window,s=document,i=t,r=0,c=0,a=!1,u=!1,d=o.prototype;return d.constructor=o,d.load=function(t){var o=this;o.isValid(t)?o.intersecting(t):i.forEach(t,function(t){o.isValid(t)&&o.intersecting(t)}),a||o.disconnect()},d.isLoaded=function(t){return i.hasClass(t,this.options.successClass)},d.isValid=function(t){return"object"==typeof t&&void 0===t.length&&!this.isLoaded(t)},d.prepare=function(){},d.revalidate=function(t){var o=this;(o.count!==o.counted||!0===t)&&c<o.counted&&(a=!1,o.elms=(o.options.root||s).querySelectorAll(o.options.selector),o.observe(),c++)},d.intersecting=function(t){var o=this;o.lazyLoad(t),o.counted++,a||o.observer.unobserve(t)},d.lazyLoad=function(t){},d.success=function(t){var o=this;"function"==typeof o.options.success&&o.options.success(t,o.options)},d.error=function(t){var o=this;"function"==typeof o.options.error&&o.options.error(t,o.options)},d.loaded=function(t,o){var e=this;e[o===e._ok?"success":"error"](t),i.addClass(t,o===e._ok?e.options.successClass:e.options.errorClass)},d.removeAttrs=function(t,o){i.forEach(o,function(o){t.removeAttribute("data-"+o)})},d.setAttrs=function(t,o){var e=this;i.forEach(o,function(o){e.setAttr(t,o)})},d.setAttr=function(t,o,e){t.hasAttribute("data-"+o)&&(t.setAttribute(o,t.getAttribute("data-"+o)),e&&t.removeAttribute("data-"+o))},d.equal=function(t,o){return t.nodeName.toLowerCase()===o},d.observe=function(){var t=this;r=t.elms.length,i.forEach(t.elms,function(o){t.isLoaded(o)||t.observer.observe(o)})},d.observing=function(t,o){var e=this;e.entries=t,a||(i.forEach(t,function(t){"function"==typeof e.options.observing&&e.options.observing(t,o,e.options),(t.intersectionRatio>0||t.isIntersecting)&&(e.isLoaded(t.target)||e.intersecting(t.target),r--)}),e.disconnect())},d.disconnect=function(){var t=this;0!==r&&t.count!==t.counted||!t.options.disconnect||(t.observer.disconnect(),a=!0)},o});
